# frozen_string_literal: true

module Inferno
  module Sequence
    class <%=class_name%> < SequenceBase
      title '<%=title%> Tests'
      description 'Verify support for the server capabilities required by the <%=title%> profile.'
      details %(
      )
      test_id_prefix '<%=test_id_prefix%>'
      requires <%=requirements.join(', ')%>

      @resource_found = nil

      <% tests.each_with_index do |test, idx|%>
<% if test[:key].present? %>
      test :<%= test[:key] %> do
<% else %>
      test '<%= test[:tests_that] %>' do
<% end %>
        metadata do
          id '<%=format('%02d', idx + 1)%>'<% if test[:key].present? %>
          name '<%= test[:tests_that] %>'<% end %>
          link '<%=url%>'<%if test[:optional]%>
          optional<%end%>
          description %(
            <%=test[:description]%>
          )
          versions :r4
        end
<%=test[:test_code]%>
      end<% end%>
    end
  end
end
